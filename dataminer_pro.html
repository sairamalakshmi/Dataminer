<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataMiner Pro - Web Scraper</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .copyright {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            padding: 15px 30px;
            text-align: center;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .copyright .developer {
            font-weight: 600;
            color: #3498db;
        }

        .main-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .section:hover {
            border-color: #3498db;
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.1);
            transform: translateY(-2px);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .emoji {
            font-size: 1.2em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .results {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            background: #f8f9fa;
        }

        .success {
            border-left-color: #27ae60;
            background: #d5f4e6;
        }

        .error {
            border-left-color: #e74c3c;
            background: #fdf2f2;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            color: #7f8c8d;
            margin-top: 5px;
        }

        .data-preview {
            max-height: 300px;
            overflow-y: auto;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin-top: 15px;
        }

        .url-list {
            margin-top: 15px;
        }

        .url-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .url-item input {
            flex: 1;
            margin-right: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .btn-small {
            padding: 8px 15px;
            font-size: 14px;
        }

        .example-urls {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .example-urls h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .example-url {
            display: block;
            color: #3498db;
            text-decoration: none;
            padding: 5px 0;
            border-bottom: 1px solid #bdc3c7;
            cursor: pointer;
        }

        .example-url:hover {
            background: rgba(52, 152, 219, 0.1);
            padding-left: 10px;
            transition: all 0.3s ease;
        }

        .footer {
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            padding: 20px 30px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }

        .footer .developer-info {
            margin-bottom: 10px;
        }

        .footer .developer-name {
            color: #3498db;
            font-weight: 600;
        }

        .footer .copyright-year {
            color: #2c3e50;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .section {
                padding: 20px;
            }

            .copyright {
                padding: 10px 20px;
                font-size: 0.8em;
            }

            .footer {
                padding: 15px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ DataMiner Pro</h1>
            <p>Intelligent Web Scraping Tool - Test and extract data from any website</p>
        </div>

        <div class="copyright">
            Developed by <span class="developer">Sai Rama Lakshmi</span> ‚Ä¢ ¬© 2025 All Rights Reserved
        </div>

        <div class="main-content">
            <!-- URL Debug Section -->
            <div class="section">
                <h2><span class="emoji">üîç</span>URL Debug & Test</h2>
                <div class="input-group">
                    <label for="debugUrl">Enter URL to test:</label>
                    <input type="url" id="debugUrl" placeholder="https://example.com" />
                </div>
                <button class="btn" onclick="debugURL()">Test URL</button>
                <button class="btn btn-success" onclick="quickScrape()">Quick Scrape</button>
                
                <div class="example-urls">
                    <h4>Try these example URLs:</h4>
                    <a class="example-url" onclick="setURL('https://httpbin.org/json')">https://httpbin.org/json (JSON API)</a>
                    <a class="example-url" onclick="setURL('https://quotes.toscrape.com/')">https://quotes.toscrape.com/ (HTML Tables)</a>
                    <a class="example-url" onclick="setURL('https://jsonplaceholder.typicode.com/users')">https://jsonplaceholder.typicode.com/users (JSON Data)</a>
                    <a class="example-url" onclick="setURL('https://httpbin.org/html')">https://httpbin.org/html (HTML Content)</a>
                </div>

                <div class="loading" id="debugLoading">
                    <div class="spinner"></div>
                    <p>Testing URL...</p>
                </div>
                
                <div id="debugResults"></div>
            </div>

            <!-- Multiple URL Scraping -->
            <div class="section">
                <h2><span class="emoji">üìä</span>Batch URL Scraping</h2>
                <p style="margin-bottom: 20px; color: #7f8c8d;">Add multiple URLs to scrape them all at once</p>
                
                <div id="urlList" class="url-list">
                    <div class="url-item">
                        <input type="url" placeholder="https://example.com" />
                        <select>
                            <option value="auto">Auto-detect</option>
                            <option value="html_table">HTML Table</option>
                            <option value="json_api">JSON API</option>
                            <option value="dynamic_content">Dynamic Content</option>
                        </select>
                        <button class="btn btn-small btn-danger" onclick="removeURL(this)">Remove</button>
                    </div>
                </div>
                
                <button class="btn" onclick="addURL()">Add URL</button>
                <button class="btn btn-success" onclick="scrapeMultiple()">Scrape All URLs</button>
                <button class="btn btn-danger" onclick="clearResults()">Clear Results</button>

                <div class="loading" id="batchLoading">
                    <div class="spinner"></div>
                    <p>Scraping URLs...</p>
                </div>

                <div id="batchResults"></div>
            </div>

            <!-- Statistics Dashboard -->
            <div class="section">
                <h2><span class="emoji">üìà</span>Scraping Statistics</h2>
                <div class="stats" id="statsContainer">
                    <div class="stat-card">
                        <div class="stat-number" id="totalAttempts">0</div>
                        <div class="stat-label">Total Attempts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="successfulScrapes">0</div>
                        <div class="stat-label">Successful Scrapes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="successRate">0%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgResponseTime">0ms</div>
                        <div class="stat-label">Avg Response Time</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="developer-info">
                Crafted with ‚ù§Ô∏è by <span class="developer-name">Sai Rama Lakshmi</span>
            </div>
            <div>
                Copyright ¬© <span class="copyright-year">2025</span> DataMiner Pro. All rights reserved.
            </div>
        </div>
    </div>

    <script>
        // Global variables to track scraping statistics
        let scrapingStats = {
            totalAttempts: 0,
            successfulScrapes: 0,
            totalResponseTime: 0,
            results: []
        };

        function setURL(url) {
            document.getElementById('debugUrl').value = url;
        }

        async function debugURL() {
            const url = document.getElementById('debugUrl').value.trim();
            if (!url) {
                showResult('debugResults', 'Please enter a URL to test', 'error');
                return;
            }

            const loading = document.getElementById('debugLoading');
            const results = document.getElementById('debugResults');
            
            loading.style.display = 'block';
            results.innerHTML = '';

            try {
                const startTime = Date.now();
                
                // Test URL accessibility
                const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                
                const responseTime = Date.now() - startTime;
                
                scrapingStats.totalAttempts++;
                scrapingStats.totalResponseTime += responseTime;

                if (data.status.http_code === 200) {
                    scrapingStats.successfulScrapes++;
                    
                    const debugInfo = {
                        url: url,
                        status_code: data.status.http_code,
                        response_time: responseTime,
                        content_type: detectContentType(data.contents),
                        content_length: data.contents.length,
                        success: true
                    };

                    showDebugResult(debugInfo);
                } else {
                    showResult('debugResults', `‚ùå Failed to access URL. Status: ${data.status.http_code}`, 'error');
                }
            } catch (error) {
                showResult('debugResults', `‚ùå Error testing URL: ${error.message}`, 'error');
            } finally {
                loading.style.display = 'none';
                updateStats();
            }
        }

        async function quickScrape() {
            const url = document.getElementById('debugUrl').value.trim();
            if (!url) {
                showResult('debugResults', 'Please enter a URL to scrape', 'error');
                return;
            }

            const loading = document.getElementById('debugLoading');
            const results = document.getElementById('debugResults');
            
            loading.style.display = 'block';
            results.innerHTML = '';

            try {
                const startTime = Date.now();
                const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                const responseTime = Date.now() - startTime;

                scrapingStats.totalAttempts++;
                scrapingStats.totalResponseTime += responseTime;

                if (data.status.http_code === 200) {
                    scrapingStats.successfulScrapes++;
                    
                    const scrapeResult = await processScrapedData(data.contents, url);
                    showScrapeResult(scrapeResult, responseTime);
                } else {
                    showResult('debugResults', `‚ùå Failed to scrape URL. Status: ${data.status.http_code}`, 'error');
                }
            } catch (error) {
                showResult('debugResults', `‚ùå Error scraping URL: ${error.message}`, 'error');
            } finally {
                loading.style.display = 'none';
                updateStats();
            }
        }

        function detectContentType(content) {
            try {
                JSON.parse(content);
                return 'application/json';
            } catch {
                if (content.includes('<html') || content.includes('<table')) {
                    return 'text/html';
                }
                return 'text/plain';
            }
        }

        async function processScrapedData(content, url) {
            const contentType = detectContentType(content);
            
            if (contentType === 'application/json') {
                try {
                    const jsonData = JSON.parse(content);
                    return {
                        type: 'json',
                        data: jsonData,
                        count: Array.isArray(jsonData) ? jsonData.length : Object.keys(jsonData).length,
                        preview: JSON.stringify(jsonData, null, 2).substring(0, 500) + '...'
                    };
                } catch (error) {
                    return { type: 'error', message: 'Failed to parse JSON data' };
                }
            } else if (contentType === 'text/html') {
                // Simple HTML parsing to extract tables and text
                const parser = new DOMParser();
                const doc = parser.parseFromString(content, 'text/html');
                
                const tables = doc.querySelectorAll('table');
                const links = doc.querySelectorAll('a[href]');
                const images = doc.querySelectorAll('img[src]');
                const text = doc.body ? doc.body.textContent.trim().substring(0, 500) : '';

                return {
                    type: 'html',
                    data: {
                        tables_count: tables.length,
                        links_count: links.length,
                        images_count: images.length,
                        text_preview: text + '...'
                    },
                    preview: `Tables: ${tables.length}, Links: ${links.length}, Images: ${images.length}`
                };
            }
            
            return {
                type: 'text',
                data: content.substring(0, 500) + '...',
                preview: 'Plain text content extracted'
            };
        }

        function showDebugResult(debugInfo) {
            const resultsDiv = document.getElementById('debugResults');
            resultsDiv.innerHTML = `
                <div class="results success">
                    <h3>‚úÖ URL Test Results</h3>
                    <p><strong>URL:</strong> ${debugInfo.url}</p>
                    <p><strong>Status Code:</strong> ${debugInfo.status_code}</p>
                    <p><strong>Response Time:</strong> ${debugInfo.response_time}ms</p>
                    <p><strong>Content Type:</strong> ${debugInfo.content_type}</p>
                    <p><strong>Content Length:</strong> ${debugInfo.content_length} bytes</p>
                    <p style="color: #27ae60; font-weight: bold; margin-top: 10px;">üéâ URL is accessible and ready for scraping!</p>
                </div>
            `;
        }

        function showScrapeResult(result, responseTime) {
            const resultsDiv = document.getElementById('debugResults');
            
            if (result.type === 'error') {
                resultsDiv.innerHTML = `
                    <div class="results error">
                        <h3>‚ùå Scraping Error</h3>
                        <p>${result.message}</p>
                    </div>
                `;
                return;
            }

            let resultHTML = `
                <div class="results success">
                    <h3>üéâ Scraping Successful!</h3>
                    <p><strong>Data Type:</strong> ${result.type.toUpperCase()}</p>
                    <p><strong>Response Time:</strong> ${responseTime}ms</p>
                    <p><strong>Preview:</strong> ${result.preview}</p>
            `;

            if (result.type === 'json' && result.count) {
                resultHTML += `<p><strong>Items Found:</strong> ${result.count}</p>`;
            }

            resultHTML += `
                    <div class="data-preview">
                        <strong>Data Preview:</strong><br>
                        ${typeof result.data === 'object' ? JSON.stringify(result.data, null, 2) : result.data}
                    </div>
                </div>
            `;

            resultsDiv.innerHTML = resultHTML;
        }

        function addURL() {
            const urlList = document.getElementById('urlList');
            const newItem = document.createElement('div');
            newItem.className = 'url-item';
            newItem.innerHTML = `
                <input type="url" placeholder="https://example.com" />
                <select>
                    <option value="auto">Auto-detect</option>
                    <option value="html_table">HTML Table</option>
                    <option value="json_api">JSON API</option>
                    <option value="dynamic_content">Dynamic Content</option>
                </select>
                <button class="btn btn-small btn-danger" onclick="removeURL(this)">Remove</button>
            `;
            urlList.appendChild(newItem);
        }

        function removeURL(button) {
            button.parentElement.remove();
        }

        async function scrapeMultiple() {
            const urlItems = document.querySelectorAll('#urlList .url-item');
            const urls = [];
            
            urlItems.forEach(item => {
                const url = item.querySelector('input').value.trim();
                const type = item.querySelector('select').value;
                if (url) {
                    urls.push({ url, type });
                }
            });

            if (urls.length === 0) {
                showResult('batchResults', 'Please add at least one URL to scrape', 'error');
                return;
            }

            const loading = document.getElementById('batchLoading');
            const results = document.getElementById('batchResults');
            
            loading.style.display = 'block';
            results.innerHTML = '';

            const batchResults = [];

            for (let i = 0; i < urls.length; i++) {
                const { url, type } = urls[i];
                
                try {
                    const startTime = Date.now();
                    const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
                    const data = await response.json();
                    const responseTime = Date.now() - startTime;

                    scrapingStats.totalAttempts++;
                    scrapingStats.totalResponseTime += responseTime;

                    if (data.status.http_code === 200) {
                        scrapingStats.successfulScrapes++;
                        const scrapeResult = await processScrapedData(data.contents, url);
                        batchResults.push({
                            url,
                            success: true,
                            data: scrapeResult,
                            responseTime,
                            type: type === 'auto' ? scrapeResult.type : type
                        });
                    } else {
                        batchResults.push({
                            url,
                            success: false,
                            error: `HTTP ${data.status.http_code}`,
                            responseTime: 0
                        });
                    }
                } catch (error) {
                    batchResults.push({
                        url,
                        success: false,
                        error: error.message,
                        responseTime: 0
                    });
                }

                // Add small delay between requests
                if (i < urls.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }

            loading.style.display = 'none';
            showBatchResults(batchResults);
            updateStats();
        }

        function showBatchResults(results) {
            const resultsDiv = document.getElementById('batchResults');
            const successCount = results.filter(r => r.success).length;
            
            let html = `
                <div class="results success">
                    <h3>üìä Batch Scraping Complete</h3>
                    <p><strong>Total URLs:</strong> ${results.length}</p>
                    <p><strong>Successful:</strong> ${successCount}</p>
                    <p><strong>Failed:</strong> ${results.length - successCount}</p>
                    <p><strong>Success Rate:</strong> ${((successCount / results.length) * 100).toFixed(1)}%</p>
                </div>
            `;

            results.forEach((result, index) => {
                if (result.success) {
                    html += `
                        <div class="results success" style="margin-top: 15px;">
                            <h4>‚úÖ URL ${index + 1}: Success</h4>
                            <p><strong>URL:</strong> ${result.url}</p>
                            <p><strong>Type:</strong> ${result.type}</p>
                            <p><strong>Response Time:</strong> ${result.responseTime}ms</p>
                            <p><strong>Preview:</strong> ${result.data.preview}</p>
                        </div>
                    `;
                } else {
                    html += `
                        <div class="results error" style="margin-top: 15px;">
                            <h4>‚ùå URL ${index + 1}: Failed</h4>
                            <p><strong>URL:</strong> ${result.url}</p>
                            <p><strong>Error:</strong> ${result.error}</p>
                        </div>
                    `;
                }
            });

            resultsDiv.innerHTML = html;
        }

        function clearResults() {
            document.getElementById('batchResults').innerHTML = '';
            document.getElementById('debugResults').innerHTML = '';
        }

        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = `
                <div class="results ${type}">
                    <p>${message}</p>
                </div>
            `;
        }

        function updateStats() {
            document.getElementById('totalAttempts').textContent = scrapingStats.totalAttempts;
            document.getElementById('successfulScrapes').textContent = scrapingStats.successfulScrapes;
            
            const successRate = scrapingStats.totalAttempts > 0 
                ? ((scrapingStats.successfulScrapes / scrapingStats.totalAttempts) * 100).toFixed(1)
                : 0;
            document.getElementById('successRate').textContent = successRate + '%';
            
            const avgResponseTime = scrapingStats.totalAttempts > 0
                ? Math.round(scrapingStats.totalResponseTime / scrapingStats.totalAttempts)
                : 0;
            document.getElementById('avgResponseTime').textContent = avgResponseTime + 'ms';
        }

        // Initialize with one URL input
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DataMiner Pro loaded successfully!');
            console.log('Developed by Sai Rama Lakshmi ¬© 2025');
        });
    </script>
</body>
</html>